
# Neon Raiden 游戏设计文档

## 1. 玩家机体 (Player)

*   **HP**: 100
*   **护盾 (Shield)**: 上限 **50** (原100)。
    *   获取方式：满血时拾取 `H` (Heal) 道具，或拾取 `Shield` 道具。单次获取量 **25** (原50)。
    *   机制：优先抵扣护盾值，护盾耗尽后才扣除 HP。设计目标：仅作为紧急缓冲，杜绝站撸。
*   **僚机 (Option)**: 
    *   上限：3 个。
    *   获取方式：拾取 `O` (Option) 道具。
    *   行为：环绕战机飞行，随战机一同开火。发射基础子弹。
*   **炸弹 (Bomb)**:
    *   初始：3 个。
    *   效果：全屏清屏，消除所有敌方子弹，秒杀普通敌人，对 Boss 造成 500 点巨额伤害。

## 2. 武器系统 (Weapons)

所有武器最高等级为 **10**。拾取同名武器升级，拾取不同武器切换类型（等级重置为 1）。

### 武器类型概览

| 类型 | 代号 | 颜色 | 特性描述 | 升级效果 |
| :--- | :--- | :--- | :--- | :--- |
| **VULCAN** | V | 黄色 | 基础散弹，扇形发射。 | 子弹分裂 (1 → 3 → 5 → 7)，扇形面覆盖。 |
| **LASER** | L | 青色 | 笔直的高能激光，射速快。 | 光束变粗，伤害提升。中后期变为双发/三发并行。 |
| **MISSILE** | M | 紫色 | 跟踪导弹，自动追踪最近敌人。 | 发射数量增加 (2 → 4 → 6 → 8)。 |
| **WAVE** | W | 蓝色 | 宽幅波动炮，可穿透敌人。 | 波浪变得极宽，伤害极高，但射速慢。 |
| **PLASMA** | X | 粉色 | 缓慢移动的能量球，命中产生持续AOE伤害。 | 爆炸范围随等级大幅扩大 (100px → 250px)。 |
| **TESLA** | T | 淡蓝 | 电磁武器，可连锁攻击多个敌人。 | 连锁范围扩大，伤害递增。 |
| **MAGMA** | F | 橙红 | 熔岩弹，持续造成灼烧伤害。 | 灼烧持续时间延长，伤害提升。 |
| **SHURIKEN** | S | 银灰 | 手里剑，可弹射反弹。 | 弹射次数增加，覆盖范围扩大。 |

### 详细升级机制

#### VULCAN (散弹) - 数量型
- **等级 1-2**: 1发子弹，伤害 13-16
- **等级 3-5**: 3发子弹，伤害 19-25
- **等级 6-8**: 5发子弹，伤害 28-34
- **等级 9-10**: 7发子弹，伤害 37-40
- **射速**: 100ms → 80ms (每级 -2ms)

#### LASER (激光) - 范围型
- **等级 1-4**: 单光束，宽度 15-24px
- **等级 5-7**: 双光束，宽度 27-33px
- **等级 8-10**: 三光束（中粗侧细），宽度 36-42px
- **射速**: 固定 60ms
- **特性**: 可穿透敌人

#### MISSILE (导弹) - 数量型
- **等级 1-2**: 2发导弹，伤害 21-27
- **等级 3-5**: 4发导弹，伤害 33-45
- **等级 6-8**: 6发导弹，伤害 51-63
- **等级 9-10**: 8发导弹，伤害 69-75
- **射速**: 100ms → 80ms (每级 -2ms)
- **特性**: 自动追踪最近敌人

#### WAVE (波动炮) - 范围型
- **宽度**: 92px → 200px (每级 +12px)
- **伤害**: 26 → 80 (每级 +6)
- **射速**: 330ms → 150ms (每级 -20ms)
- **特性**: 可穿透敌人，威力巨大但射速慢

#### PLASMA (等离子炮) - 爆炸型
- **尺寸**: 56×56 → 128×128 (每级 +8px)
- **伤害**: 105 → 330 (每级 +25，单发最高)
- **射速**: 550ms → 100ms (每级 -50ms)
- **特性**: 缓慢移动，AOE爆炸伤害

#### TESLA (电磁炮) - 锁定型
- **伤害**: 19 → 55 (每级 +4)
- **射速**: 190ms → 100ms (每级 -10ms)
- **特性**: 自动锁定最近敌人，连锁攻击

#### MAGMA (熔岩弹) - 数量型
- **等级 1-2**: 3发，伤害 30-35
- **等级 3-5**: 4发，伤害 40-50
- **等级 6-8**: 5发，伤害 55-65
- **等级 9-10**: 6发，伤害 70-75
- **射速**: 145ms → 100ms (每级 -5ms)
- **特性**: 锥形散射，持续灼烧

#### SHURIKEN (手里剑) - 数量型
- **等级 1-2**: 2发，伤害 24-28
- **等级 3-5**: 3发，伤害 32-40
- **等级 6-8**: 4发，伤害 44-52
- **等级 9-10**: 5发，伤害 56-60
- **射速**: 116ms → 80ms (每级 -4ms)
- **特性**: 扇形发射，可弹射反弹

## 3. 掉落物 (Powerups)

击杀敌人有 20% 概率掉落道具。

*   `P` (Power): 提升当前武器等级。
*   `L` (Laser): 切换/升级为激光。
*   `V` (Vulcan): 切换/升级为散弹。
*   `W` (Wave): 切换/升级为波动炮。
*   `X` (Plasma): 切换/升级为等离子炮。
*   `T` (Tesla): 切换/升级为电磁武器。
*   `F` (Magma): 切换/升级为熔岩弹。
*   `S` (Shuriken): 切换/升级为手里剑。
*   `H` (Heal): 恢复 30 HP。若满血，转化为 50 护盾。
*   `O` (Option): 增加一个僚机。
*   `B` (Bomb): 增加一个全屏炸弹。

## 4. 敌人图鉴 (Enemies)

| ID | 名称 | 外观 | HP (基础) | 行为模式 |
| :--- | :--- | :--- | :--- | :--- |
| 0 | **Scout** | 红色无人机 | 20 | 缓慢直线飞行，偶尔发射子弹。 |
| 1 | **Wing** | 紫色飞翼 | 10 | 快速折线移动，难以瞄xy准。 |
| 2 | **Tank** | 绿色重坦 | 60 | 移动缓慢，体积大，血厚。 |
| 3 | **Kamikaze** | 橙色尖刺 | 5 | **自爆机**。快速冲向玩家位置，不发射子弹。 |
| 4 | **Gunboat** | 蓝色炮舰 | 150 | 移动极慢，发射瞄准玩家的快速弹幕。 |
| 5 | **Interceptor**| 白色/青色 | 80 | **激光截击机**。移动到屏幕中段悬停，预警后发射贯穿激光。 |
| 6 | **Layer** | 深灰/黄色 | 120 | **布雷舰**。移动缓慢，在身后持续留下静止空雷。 |

### 精英怪系统 (Elite System)
*   **触发概率**: 所有普通敌人生成时有 **15%** 概率变为精英。
*   **特征**: 体积 x1.3，血量 x3，全身金光闪烁。
*   **奖励**: 掉落道具概率大幅提升。

## 5. Boss 设计

每关 Boss 会在合适的时间点出现。Boss 出现位置随机化，不再固定于屏幕中央。

### Boss 数值表

| 关卡 | 名称 | HP | 移动速度 | 子弹数 | 子弹速度 | 开火率 | 瞄准弹速度 | 激光 | 激光类型 | 武器数 | 僚机数 | 得分 |
| :--- | :--- | ---: | ---: | ---: | ---: | ---: | ---: | :---: | :---: | ---: | ---: | ---: |
| 1 | 守护者 (Guardian) | 1,500 | 1.0 | 8 | 4.0 | 5% | - | ❌ | - | 1 | 0 | 5,000 |
| 2 | 拦截者 (Interceptor) | 1,800 | 1.2 | 11 | 4.5 | 6% | 9 | ❌ | - | 1 | 0 | 10,000 |
| 3 | 毁灭者 (Destroyer) | 2,160 | 1.4 | 14 | 5.0 | 6.5% | 10 | ❌ | - | 1 | 0 | 15,000 |
| 4 | 歼灭者 (Annihilator) | 2,592 | 1.6 | 17 | 5.5 | 7% | 11 | ❌ | - | 1 | 0 | 20,000 |
| 5 | 主宰者 (Dominator) | 3,110 | 1.8 | 20 | 6.0 | 7.5% | 12 | ❌ | - | 1 | 0 | 25,000 |
| 6 | 霸主 (Overlord) | 3,732 | 2.0 | 23 | 6.5 | 8% | 13 | ✅ | 连续光束 | 2 | 0 | 30,000 |
| 7 | 泰坦 (Titan) | 4,478 | 2.2 | 26 | 7.0 | 8.5% | 14 | ✅ | 连续光束 | 2 | 0 | 35,000 |
| 8 | 巨像 (Colossus) | 5,374 | 2.4 | 29 | 7.5 | 9% | 15 | ✅ | 脉冲激光 | 2 | 1 | 40,000 |
| 9 | 利维坦 (Leviathan) | 6,449 | 2.6 | 32 | 8.0 | 9.5% | 16 | ✅ | 脉冲激光 | 3 | 2 | 45,000 |
| 10 | 天启 (Apocalypse) | 7,739 | 2.8 | 35 | 8.5 | 10% | 17 | ✅ | 脉冲激光 | 3 | 2 | 50,000 |

### Boss 外观设计

每个 Boss 都拥有独特的外观和特征，不使用简单几何形状。Boss 尺寸会根据配置进行缩放（0.8x-1.0x），并且碰撞箱会进一步缩小到 0.8 倍以提供更精确的碰撞检测。

### 攻击模式说明

*   **环形弹幕**: 向四周发射一圈子弹，数量和速度随关卡递增。第1关8发，第10关35发。
*   **瞄准弹**: 从第2关开始，发射高速追踪弹瞄准玩家位置。速度从9递增至17。
*   **扇形弹幕**: 第8关起，发射5发扇形散射弹幕。
*   **追踪导弹**: 第9-10关，每次发射2发自动追踪玩家的导弹。
*   **激光攻击**: 
    *   第6-7关：连续光束激光，持续1.5秒，伤害30-35
    *   第8-10关：脉冲激光，5连发快速射击，单发伤害20-25（总伤害40-50）
*   **武器系统**: 
    *   第1-5关：1个武器系统（环形弹幕 + 瞄准弹）
    *   第6-7关：2个武器系统（环形 + 瞄准 + 激光）
    *   第8关：2个武器系统（环形 + 瞄准 + 激光 + 扇形）
    *   第9-10关：3个武器系统（环形 + 瞄准 + 激光 + 扇形 + 追踪）

### 僚机系统

第8-10关的 Boss 会携带僚机支援：
*   **第8关**: 1个僚机（激光截击机，类型5）
*   **第9关**: 2个僚机（激光截击机，类型5）
*   **第10关**: 2个僚机（布雷舰，类型6）

**僚机机制**:
*   僚机拥有独立生命值（300 HP）
*   僚机必须全部摧毁后，Boss 才能受到伤害
*   僚机会跟随 Boss 移动（左右偏移120像素，下方偏移80像素），并发起独立攻击
*   僚机被标记为精英单位，具有金色光芒效果

### 移动模式

*   **正弦波动** (1-2关): 简单的左右横向移动，使用cos函数计算偏移
*   **8字盘旋** (3-5关): 复杂的8字形移动轨迹，横向使用sin，纵向使用sin的二次谐波
*   **追踪模式** (6-7关): 横向追踪玩家位置，带有上下浮动（sin函数三次谐波）
*   **激进模式** (8-10关): 主动追踪玩家，每8秒进行一次俯冲攻击（下降至250像素），然后回升至100像素

### 出现机制

*   Boss 在合适的时间点出现（由游戏引擎控制）
*   Boss 出现后，会从屏幕上方（y=-150）进入，速度为配置的移动速度
*   当 Boss 到达 y=150 位置时，进入战斗状态，开始执行移动模式和攻击
*   Boss 出现位置随机化：在屏幕宽度的 25%-75% 范围内随机生成
*   Boss 出现时伴随音效（复用能量提升音效作为警报）

### 难度递进设计

*   **HP增长**: 每关增加约20%生命值（1500 → 1800 → 2160...）。
*   **弹幕密度**: 子弹数量从8发递增至35发。
*   **速度提升**: 子弹速度从4.0递增至8.5，移动速度从1.0递增至2.8。
*   **开火频率**: 从5%逐步提升至10%，后期Boss攻击更加密集。
*   **体积变化**: Boss尺寸从0.8x逐渐增大至1.0x。
*   **特殊能力**: 
    *   1-5关：基础弹幕攻击
    *   6-7关：加入连续光束激光
    *   8-10关：脉冲激光、僚机系统、全武器组合

## 6. 关卡设置

*   共 **10** 关。
*   每关敌人生成频率加快，子弹速度略微提升。
*   背景随时间缓慢变化。
*   **关卡过渡**: 击败 Boss 后，显示大型淡入淡出的 "STAGE {关卡}" 提示，持续3秒。
*   **进度要求**: 必须击败当前关卡的 Boss 才能进入下一关。
*   通关后显示 Victory 画面。
