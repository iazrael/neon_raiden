## 核心改动
- 采用“合成弹模式（默认）”：当满足两种武器协同条件时，保持单一弹流不变，把当前主武器的子弹改造成“合成弹”，附加副武器特性与效果；不需要双发或并行弹道。
- 提供“轮发模式（可选）”：在两种武器之间ABAB轮流发射（每次射击切换类型或按固定窗口切换）；仍保持同一时刻只有一种弹型，避免引擎大改。

## 触发不可达问题的解决
- 例如 WAVE+PLASMA：当前仅发WAVE时无法产生PLASMA爆炸区。解决：将WAVE改造成“WAVE_PLASMA合成弹”：命中时在波形路径上生成短生命期的微型等离子涡流（持续1.2s，半径随波宽），从而实现区域联动与伤害×1.5，无需真实PLASMA子弹存在。

## 协同清单（合成弹版）
- LASER + TESLA（电磁折射）进攻：保留现状（15%连锁电弧），LASER命中附加 `chain_lightning`；来源 `game/systems/WeaponSynergySystem.ts:193-204`。
- WAVE + PLASMA（能量共鸣）进攻：WAVE_PLASMA合成弹；波形命中沿路径生成微型涡流区，处于该区的波段伤害×1.5，并对近邻再触发一次脉冲（额外20%伤害）。
- MISSILE + VULCAN（弹幕覆盖）进攻：MISSILE_VULCAN合成弹；导弹爆炸时释放8枚短程碎片（VULCAN样式），对爆心周围造成补刀（每枚15% MISSILE伤害），并使主炸伤害×1.2。
- MAGMA + SHURIKEN（熔火飞刃）进攻：SHURIKEN合成弹；每次反弹后为命中目标叠加 `magmaBurn`（5/秒×3s），反弹次数≥2时燃烧效率+50%。
- TESLA + PLASMA（等离子风暴）进攻+防守：
  - 若主武器为PLASMA：PLASMA_TESLA合成弹；爆炸额外触发3道闪电（保留），并施加玩家 `shieldRegen +6` 与 `invulnerable 200ms`（5s内置CD）。
  - 若主武器为TESLA：TESLA_PLASMA合成弹；TESLA命中在目标周围生成微型等离子脉冲（0.6s），脉冲区内的后续电弧伤害+30%。
- LASER + MISSILE（精准引爆）进攻：LASER_MISSILE合成弹；LASER对“精准标记”目标（0.8s），随后MISSILE合成弹命中标记目标爆半径+40%、溅射×1.2；轮发模式下表现更稳定。
- VULCAN + PLASMA（穿透火线）进攻：VULCAN合成弹在PLASMA涡流区内获得一次穿透（第二目标伤害×0.7），扩大清场性。
- WAVE + MISSILE（减速场）防守：MISSILE_WAVE合成弹；导弹爆炸生成1.8s减速场（敌弹速度-25%、敌人移动-20%）。
- MAGMA + TESLA（过载修复）防守：对身上 `magmaBurn`≥3层的目标触发电弧时，为玩家 `shieldRegen +4`（3s CD）。
- SHURIKEN + LASER（反弹护身）防守：反弹事件后玩家获得 `invulnerable 150ms` 与 `moveSpeed +10%` 持续0.6s。

## 数值与平衡（与 GAME_BALANCE_DESIGN 同步）
- 伤害倍率：1.2–1.5；溅射/碎片伤害以主武器基伤的15–30%计；穿透第二目标×0.7。
- 回复与防护：单次 `shieldRegen 4–8`；`invulnerable 150–200ms`；全局上限：10s窗口内不超过 `maxShield` 的30%、`maxHp` 的15%。
- 触发与CD：事件型概率 10–20%；区域/标记型为必触发但有 2–5s 内置CD；标签TTL 0.6–0.8s。
- 难度适配：HARD 模式下触发率-10%、回复-15%。

## 技术实现
- 合成弹生成：
  - 在 `WeaponSystem` 发射流程中，当检测到协同激活且存在“主+副武器”组合时，构造合成弹参数（基于主武器 `WeaponConfig` 与副武器特性），不改变“同一时刻单弹型”的核心约束。
  - 合成弹作为现有 `BulletType` 的派生标识（例如字符串枚举扩展 `wave_plasma`, `missile_vulcan`），其渲染沿用主弹体样式，特效用 `SYNERGY_CONFIGS.color`。
- 轮发模式（可选开关）：按射击次数或时间片 ABAB 切换主武器弹型（无需并发），默认关闭，供偏策略玩家开启。
- 事件/标签：维持 `CombatEvent` + `CombatTagSystem`（敌人/玩家短时标签），用于精准标定“精准标记”“magmaBurn”等。
- 协同解析：扩展 `SynergyTriggerContext` 增加 `eventType`, `isHybrid`, `hybridKind` 字段；在 `game/systems/WeaponSynergySystem.ts:187` 统一解析。

## 文件影响范围（实施时）
- `game/systems/WeaponSynergySystem.ts`：扩展上下文与 effect；保留现有进攻协同，并加入防守类 effect。
- `game/systems/WeaponSystem.ts`：在发射点选择“合成弹/轮发”；在命中/爆炸/反弹分发事件。
- `game/config/weapons/*`：为合成弹补充派生配置（不改变原有发射模型）。
- `types/index.ts`：严格类型扩展 `BulletType` 与 `SynergyTriggerResult` 的新 effect 枚举。
- `docs/GAME_BALANCE_DESIGN.md`：新增协同表（条件、数值、CD、上限、难度系数）。

## 验证
- 单测：合成弹属性合成、标签TTL与CD、伤害与回复上限验证。
- 关卡沙盒：固定敌群与弹幕，逐项验证协同触发与视觉效果。
- 指标：协同触发频率、平均DPS提升、平均回复量、死亡率变化；按 2–3 轮调参。

## 说明
- 默认采用“合成弹模式”以最小改动满足协同可达；若你希望更突出双武器个性，可在选项中开启“轮发模式”。

确认后我将据此落地代码与文档并提供演示。